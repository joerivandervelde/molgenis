<molgenis name="org.molgenis.omx">
	<module name="values" label="Values module">
		<description>
			Advanced value types for core
		</description>

		<entity name="PermittedValue" implements="AutoId">
			<description>Specification of what type of value are acceptable when
				adding an Value for the Method this PermittedValue refers
				to. This includes more precise constraints such as the allowed range
				of numerical data, choosable options for categorical data, or
				regular expression validation for textual data. For categorical
				data, multiple PermittedValue records each containing a single
				string value refers to a Method. For XREF data, the entity type
				which is the most specific root should be specified. For example:
				specifying org.molgenis.omx.Individual allows for XREFs to all
				Individuals, plus all subclasses of this type.

				Multiple PermittedValues can be attached to a Feature. This means you can allow complex permitted values such as ["yes", "no", 1, 0], using two PermittedValues, one for String and one for Integer, each holding two options - or four separate PermittedValues for each option.
				
				PermittedValues are by design not 'reusable' via an MREF, because they act both as validators and provenance. Changing the options afterwards is bad practice, but at least will affect at most only a single Feature.
				
				

			</description>
			
			<field name="Description" description="Clarification of this option." />

			<field name="Feature" type="xref" xref_entity="Feature"
				description="The method these permitted values are part of." />

			<field name="AllowedValue" type="string" nillable="false"
				description="The constraint rule that is applied when entering a value for a method to which this permittedvalue belong. Eg: 'm' or 'f' for categorical codes, '0..10' for an integer range, 'Individual' for an XREF value class." />
			<field name="ValueLabel" type="string" nillable="true"
				description="The label for the contraint. Eg. in case of categorical values: 'Male' for code 'm' or 'Female' for code 'f'. For an integer range code like 0..100 it could be 'Percentage'. For an XREF class code such as 'Individual' it could provide extra information such as 'Participating persons'." />

		</entity>
		
		<entity name="TextValue" extends="Value">
			<description>An observation for which the value is a string of text. This is the most basic and broad flavour of Value; it can contain large pieces of 'untyped' data.
					TBD: Typically has no PermittedValue rules associated.
			</description>
			<field name="Value" type="text" nillable="false" />
		</entity>
		
		<entity name="StringValue" extends="Value">
			<description>An observation for which the value is a string, with at most 127 characters.
			</description>
			<field name="Value" type="varchar" length="127"/>
		</entity>

		<entity name="DecimalValue" extends="Value">
			<description>An observation for which the value is a decimal number.
			</description>
			<field name="Value" type="decimal" />
		</entity>

		<entity name="IntegerValue" extends="Value">
			<description>An observation for which the value is an integer number.
			</description>
			<field name="Value" type="int" />
		</entity>

		<entity name="XrefValue" extends="Value">
			<description>An observation for which the value refers to a Concept
				in the database.
			</description>
			<field name="Value" type="xref" xref_entity="Target" />
		</entity>


	</module>
</molgenis>
